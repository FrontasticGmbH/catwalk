!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=36)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("lodash")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("frontastic-common")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("classnames")},function(e,t){},function(e,t){e.exports=require("redux")},function(e,t){},function(e,t){e.exports=require("react-sizer")},function(e,t){e.exports=require("react-intl")},function(e,t){e.exports=require("imagesloaded")},function(e,t){e.exports=require("react-custom-scrollbars")},function(e,t){},function(e,t){e.exports=require("react-transition-group")},function(e,t){e.exports=require("rc-slider")},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){e.exports=require("flickity")},function(e,t){},function(e,t){},function(e,t){},function(e,t){e.exports=require("markdown")},function(e,t){e.exports=require("fast-levenshtein")},function(e,t){e.exports=require("route-pattern")},function(e,t){e.exports=require("history/createBrowserHistory")},function(e,t){e.exports=require("redux-thunk")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("express")},function(e,t,r){"use strict";r.r(t);var n=r(33),a=r.n(n),o=r(32),i=r.n(o),s=r(0),c=r.n(s),u=r(31),l=r(5),p=r(3),f=r(2),h=r.n(f),d=r(8),m=r(30),y=r.n(m),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;this.loading=!e,this.loaded=e?new Date:null,this.error=null,this.data=e,this.ttl=t,this.isComplete=function(){return!this.loading&&!this.error},this.isCurrent=function(){return!(!this.loaded||this.error)&&this.loaded.getTime()>(new Date).getTime()-1e3*this.ttl},this.setError=function(e){return this.loading=!1,this.loaded=null,this.error=e,this.data=null,this}};b.purgeMap=function(e){var t={};for(var r in e)e[r]&&e[r].isCurrent&&e[r].isCurrent()&&(t[r]=e[r]);return t},b.purge=function(e){return e&&e.isCurrent()?e:new b};var g=b,v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=t}return v(e,[{key:"getItems",value:function(){return this.items}},{key:"getProductCount",value:function(){return h.a.sumBy(this.items,"count")}}]),e}(),_=function(e,t){var r=this;this.store=e,this.api=t,this.add=function(e,t,n){var a=r.store.getState().basket.basket.items,o=h.a.find(a,function(r){return r.product.productId===e.productId&&r.variant.id===t.id});o?o.count+=n:a.push({product:e,variant:t,count:n}),r.store.dispatch({type:"Domain.Basket.success",data:{items:a}})}},j={basket:new w};_.handleAction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments[1];switch(t.type){case"FRONTASTIC_ROUTE":return e;case"Domain.Basket.success":return Object.assign({},e,{basket:new w(t.data.items)})}return e};var E=_,O=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),P=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.environment="production",this.locale="en_GB",this.session={loggedIn:!1,user:null,message:null},this.hasFeature=function(e){return this.features&&h.a.contains(this.features,e)},this.isLoggedIn=function(){return this.session&&this.session.loggedIn},this.fromParameters=function(e){},this.toParameters=function(){return{environment:this.environment,project:this.project.projectId||null,locale:this.locale}},this.isDevelopment=function(){return"development"===this.environment},this.getLanguage=function(){return this.locale.substr(0,this.locale.indexOf("_"))},this.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={},n=!0,a=!1,o=void 0;try{for(var i,s=Object.entries(this)[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var c=i.value,u=O(c,2),l=u[0],p=u[1];r[l]=p}}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}t.project&&"string"==typeof t.project&&(r.project.projectId=t.project,delete t.project);var f=!0,h=!1,d=void 0;try{for(var m,y=Object.entries(t)[Symbol.iterator]();!(f=(m=y.next()).done);f=!0){var b=m.value,g=O(b,2),v=g[0],w=g[1];r[v]=w}}catch(e){h=!0,d=e}finally{try{!f&&y.return&&y.return()}finally{if(h)throw d}}return t.project&&"string"==typeof t.project&&(r.project.projectId=t.project),new e(r)};var r=!0,n=!1,a=void 0;try{for(var o,i=Object.entries(t)[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var s=o.value,c=O(s,2),u=c[0],l=c[1];this[u]=l}}catch(e){n=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw a}}!this.project&&this.customer&&(this.project=this.customer.projects[0])};var k=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};k.getActionHash=function(e){return JSON.stringify(k.getActionParameters(e))},k.getActionParameters=function(e){return h.a.pickBy(e,function(e,t){return"_"!==t.charAt(0)})},k.hasChanged=function(e,t){return!e||(e.route!==t.route||k.getActionHash(e.parameters)!==k.getActionHash(t.parameters))};var x=k,R=function(e,t){var r=this;this.store=e,this.api=t,this.loadTree=function(e){r.api.trigger("Frontastic.Frontend.Node.tree",e,e.root||"root")},this.loadNode=function(e){r.api.trigger("Frontastic.Frontend.Node.view",e,e.nodeId)},this.reloadPreview=function(e){r.api.trigger("Frontastic.Frontend.Preview.view",e,e.preview)},this.loadMaster=function(e,t){r.api.request("GET",e,t,null,function(e,t){r.store.dispatch({id:e.node.nodeId,cacheKey:x.getActionHash(t),type:"Frontend.Master.view.success",data:e,parameters:t})},function(e){r.store.dispatch({id:null,cacheKey:x.getActionHash(t),type:"Frontend.Master.view.error",error:e})})}},T={error:null,trees:{},nodes:{},nodeData:{},pages:{},last:{node:null,data:null,page:null},currentNodeId:null,currentCacheKey:null};R.handleAction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments[1],r={},n={},a={},o={};switch(t.type){case"FRONTASTIC_ROUTE":return{error:null,trees:g.purgeMap(e.trees),nodes:g.purgeMap(e.nodes),nodeData:g.purgeMap(e.nodeData),pages:g.purgeMap(e.pages),last:e.last,currentNodeId:x.hasChanged(t.lastRoute,t.route)?null:e.currentNodeId,currentCacheKey:x.hasChanged(t.lastRoute,t.route)?null:e.currentCacheKey};case"Frontend.Node.tree.success":return r=h.a.extend({},e.trees),t.id&&(r[t.id]=new g(t.data,3600)),Object.assign({},e,{trees:r});case"Frontend.Node.tree.error":return r=h.a.extend({},e.trees),t.id&&(r[t.id]=(new g).setError(t.error)),Object.assign({},e,{trees:r});case"Frontend.Node.view.success":case"Frontend.Master.view.success":case"Frontend.Preview.view.success":case"Frontend.Master.Error.view.success":n=h.a.extend({},e.nodes),a=h.a.extend({},e.nodeData),o=h.a.extend({},e.pages),t.id&&(n[t.id]=new g(t.data.node,3600),a[t.cacheKey]=new g(t.data.data,3600),o[t.id]=new g(t.data.page,3600));var i=new g(t.data.data);return i.loading=!0,Object.assign({},e,{currentNodeId:t.id,currentCacheKey:t.cacheKey,nodes:n,nodeData:a,pages:o,last:{node:new g(h.a.extend({},t.data.node)),data:i,page:new g(h.a.extend({},t.data.page))}});case"Frontend.Node.view.error":case"Frontend.Master.view.error":case"Frontend.Preview.view.error":case"Frontend.Master.Error.view.error":return n=h.a.extend({},e.nodes),a=h.a.extend({},e.nodeData),o=h.a.extend({},e.pages),t.id&&(n[t.id]=(new g).setError(t.error),a[t.cacheKey]=(new g).setError(t.error),o[t.id]=(new g).setError(t.error)),Object.assign({},e,{currentNodeId:t.id,currentCacheKey:t.cacheKey,nodes:n,nodeData:a,pages:o});case"Frontend.Error.view.success":return e.error?e:Object.assign({},e,{error:t.data})}return e};var C=R,N=function(e,t){var r=this;this.store=e,this.api=t,this.find=function(e){r.api.trigger("Frontastic.ApiCoreBundle.App.data",e,JSON.stringify(e))},this.get=function(e){r.api.trigger("Frontastic.ApiCoreBundle.App.get",e,e.dataId)}},S={data:{}};N.handleAction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments[1],r={};switch(t.type){case"FRONTASTIC_ROUTE":return{data:g.purgeMap(e.data)};case"ApiCoreBundle.App.get.success":case"ApiCoreBundle.App.data.success":return(r=h.a.extend({},e.data))[t.id]=new g(t.data,3600),Object.assign({},e,{data:r});case"ApiCoreBundle.App.get.error":case"ApiCoreBundle.App.data.error":return(r=h.a.extend({},e.data))[t.id]=(new g).setError(t.error),Object.assign({},e,{data:r})}return e};var q=N,F=function(e,t){var r=this;this.store=e,this.api=t,this.loadTastics=function(e){r.api.trigger("Frontastic.Frontend.Tastic.all",e,"tastic")}},A={tastics:null};F.handleAction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments[1],r=new g;switch(t.type){case"FRONTASTIC_ROUTE":return{tastics:g.purge(e.tastics)};case"Frontend.Tastic.all.success":return r=new g(t.data,3600),Object.assign({},e,{tastics:r});case"Frontend.Tastic.all.error":return Object.assign({},e)}return e};var I=F,M={route:null,context:new P},D=Object(d.combineReducers)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments[1];"undefined"==typeof PRODUCTION&&t.type&&"@@"!==t.type.substr(0,2)&&console.groupCollapsed&&(console.groupCollapsed("%cðŸ”Š %c%s","color: gray","color: darkmagenta",t.type),console.info(t),console.groupEnd());var r=null;switch(t.type){case"FRONTASTIC_INIT":return Object.assign({},e);case"FRONTASTIC_ROUTE":return Object.assign({},e,{route:t.route});case"ApiBundle.Api.context.success":return r=new P(t.data),Object.assign({},e,{context:r});case"ApiBundle.Api.context.error":return(r=new P(e.context)).session.message=t.data,Object.assign({},e,{context:r})}return e},node:C.handleAction,data:q.handleAction,tastic:I.handleAction,basket:E.handleAction}),V=document.getElementById("app"),B=JSON.parse(V.getAttribute("data-props")),L=Object(d.createStore)(D,{node:{last:{node:new g(B.node),data:new g(B.data),page:new g(B.page)}}},Object(d.applyMiddleware)(y.a)),U=r(29),z="undefined"!=typeof window?r.n(U)()():null,H=r(28),W=r.n(H),K=r(27),G=r.n(K),J=r(4),Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.history=e,this.routes=t,this.context=r||new P,this.parameterMatcher=/\{([A-Za-z0-9]+)\}/g,this.location=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=h.a.extend({},t,this.contextParameters());if(!(e in this.routes))throw new Error("Route "+e+" not defined, did you mean any of these: "+this.getSimilarRoutes(e).join(", "));for(var n=[],a=!1;a=this.parameterMatcher.exec(this.routes[e]);)n.push(a[1]);var o=h.a.difference(n,h.a.keys(r));if(o.length)throw new Error("Missing values for "+e+": "+o.join(", "));var i=h.a.difference(h.a.keys(r),n),s="";return i.length&&(s="?"+Object(J.httpBuildQuery)(h.a.pick(r,i))),{pathname:h.a.reduce(n,function(e,t){return e.replace("{"+t+"}",r[t])},this.routes[e]),search:s}},this.path=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.location(e,t);return r.pathname+r.search},this.match=function(e){for(var t in this.routes){var r=W.a.fromString(this.reactRoute(t));if(r.matches(e))return{route:t,parameters:r.match(e).namedParams||{}}}throw new Error("No defined route match path: "+e)},this.push=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.history.push(this.location(e,t),r)},this.replace=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.history.replace(this.location(e,t),r)},this.reactRoute=function(e){if(!(e in this.routes))throw new Error("Route "+e+" not defined, did you mean any of these: "+this.getSimilarRoutes(e).join(", "));for(var t=[],r=!1;r=this.parameterMatcher.exec(this.routes[e]);)t.push(r[1]);return h.a.reduce(t,function(e,t){return e.replace("{"+t+"}",":"+t)},this.routes[e])},this.setContext=function(e){this.context=e},this.setRoutes=function(e){this.routes=e},this.contextParameters=function(){return this.context.toParameters()},this.getSimilarRoutes=function(e){return h.a.map(h.a.sortBy(h.a.mapValues(this.routes,function(t,r){return{route:r,distance:G.a.get(r,e)}}),"distance").slice(0,5),"route")}};var Q=function(e,t){var r=this;this.router=e,this.store=t;var n=[];this.request=function(e,t,r,n,a,o){var i=this;fetch(this.router.path(t,r),{method:e,headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:function(e){return null===e||void 0===e?null:"string"==typeof e||e instanceof String?e:JSON.stringify(e)}(n),credentials:"same-origin",cache:"default"}).then(function(e){var t=e.headers.get("Content-Type");if(t&&t.includes("application/json"))return e.json().then(function(t){return{ok:e.ok,status:e.status,json:t}});console.error("Unhandled Response Type:",e),o&&o({status:500,message:"Internal Server Error"})}).then(function(r){return r&&r.json&&r.json.__DEBUG&&(console.groupCollapsed("%cðŸ’» %c%s (%s: %s)","color: gray","color: lightcoral","Server Debug",e,t),h.a.each(r.json.__DEBUG,function(e){var t;(t=console).log.apply(t,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))}),console.groupEnd()),r}).then(function(e){return e?e.ok?a?a(e.json,r):void 0:(403===e.status&&(i.clearContinuousRequests(),i.store.dispatch({type:"ApiBundle.Api.context.success",data:{session:{}}}),"Frontastic.Index.index"!==i.store.getState().app.route.route&&i.router.replace("Frontastic.Index.index")),void(e.json&&e.json.message&&"string"==typeof e.json.message?(console.error("Error:",e.json),o&&!r.hasError&&(i.trigger("Frontastic.Frontend.Master.Error.view",{hasError:!0},"error"),o(e.json,e.json.stack||null))):(console.error("Unhandled Error:",e),o&&o({status:500,message:"Internal Server Error"})))):(console.error("Invalid Response:",e),void(o&&o({status:500,message:"Internal Server Error"})))})},this.requestContinuosly=function(e,t,r,a,o){var i=this,s=this.getReloadInterval(),c=function(){i.request(e,t,r,null,a,o)};c(),n.push({refreshFunction:c,refreshInterval:s,interval:window.setInterval(c,s)})},this.trigger=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=e.substr(e.indexOf(".")+1);r.request("GET",e,t,null,function(e,t){r.store.dispatch({type:a+".success",id:n,cacheKey:x.getActionHash(t),data:e,parameters:t})},function(e){r.store.dispatch({type:a+".error",id:n,cacheKey:x.getActionHash(t),error:e})})},this.triggerContinuously=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=e.substr(e.indexOf(".")+1);r.requestContinuosly("GET",e,t,function(e){r.store.dispatch({type:a+".success",id:n,data:e})},function(e){r.store.dispatch({type:a+".error",id:n,error:e})})},this.pauseRequests=function(){if(n)for(var e=0;e<n.length;++e)window.clearInterval(n[e].interval),n[e].interval=null},this.resumeRequests=function(){if(n)for(var e=0;e<n.length;++e)n[e].interval=window.setInterval(n[e].refreshFunction,n[e].refreshInterval)},this.clearContinuousRequests=function(){this.pauseRequests(),n=[]},this.getReloadInterval=function(){return 6e4}},Y=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(var n in this.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.parameters&&this.parameters[e]?this.parameters[e]:t},this.has=function(e){return this.parameters&&this.parameters[e]},e)this[n]=e[n];this.query=t,this.urlParameters=h.a.extend({},e.parameters),this.parameters=h.a.extend({},this.urlParameters,this.query),this.historyState=r},X=function(e,t){var r=this;this.store=e,this.api=t,this.refresh=function(e){r.api.request("GET","Frontastic.ApiBundle.Api.context",e,null,function(e){var t=new P(e);ee.getRouter().setContext(t),ee.getRouter().setRoutes(t.routes),r.store.dispatch({type:"ApiBundle.Api.context.success",data:e}),ee.loadForLocation(window.location)},function(e){r.store.dispatch({type:"ApiBundle.Api.context.error",data:e})})},this.login=function(e,t){r.api.request("POST","Frontastic.UserBundle.User.login",null,{email:e,password:t},function(e){r.refresh()},function(e){r.store.dispatch({type:"ApiBundle.Api.context.error",data:e.message})})}},$=function(e,t,r){this.store=e,this.router=t,this.api=r,this.loaders={context:new X(this.store,this.api),node:new C(this.store,this.api),tastic:new I(this.store,this.api),basket:new E(this.store,this.api),data:new q(this.store,this.api)},this.loadContentForPath=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.api.clearContinuousRequests();var a=null;try{a=new Y(t.match(e),r,n)}catch(e){a=new Y({route:"Frontastic.Frontend.Master.Error.view",parameters:{}},r,n)}switch(this.store.dispatch({type:"FRONTASTIC_ROUTE",route:a,lastRoute:this.store.getState().app.route}),"undefined"==typeof PRODUCTION&&(console.groupCollapsed("%cðŸ”€ %c%s","color: gray","color: darkmagenta",a.route),console.info(a),console.groupEnd()),this.loaders.tastic.loadTastics(a.parameters),a.route){case"Frontastic.Frontend.Master.Category.view":case"Frontastic.Frontend.Master.Product.view":case"Frontastic.Frontend.Master.Error.view":this.loaders.node.loadMaster(a.route,a.parameters);break;case"Frontastic.Frontend.Preview.view":this.loaders.node.reloadPreview(a.parameters);break;default:"node_"===a.route.substr(0,5)&&(a.parameters.nodeId=a.route.substr(5),this.loaders.node.loadNode(a.parameters))}},this.getLoader=function(e){if(!(e in this.loaders))throw new Error("Unknown loader "+e);return this.loaders[e]}},ee=new function(e,t){var r=this;this.store=e,this.history=t,this.router=new Z(this.history,{"Frontastic.ApiBundle.Api.context":"/api/context"}),this.api=new Q(this.router,this.store),this.loader=new $(this.store,this.router,this.api),this.visibility=new J.VisibilityChange,this.visibility.registerCallBack(this.api.pauseRequests,this.api.resumeRequests),this.loadForLocation=function(e){r.loader.loadContentForPath(e.pathname,Object(J.httpParseQuery)(e.search.substr(1)),e.state||null)},this.getApi=function(){return this.api},this.getRouter=function(){return this.router},this.getStore=function(){return this.store},this.getLoader=function(e){return this.loader.getLoader(e)},this.history&&this.history.listen(this.loadForLocation)}(L,z),te=r(1),re=r.n(te),ne=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var ae=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={error:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),ne(t,[{key:"componentDidCatch",value:function(e,t){console.warn("Component error",e),this.setState({error:e})}},{key:"render",value:function(){return this.state.error?c.a.createElement("div",{className:"tastic e-tastic--errored"},c.a.createElement("p",null,this.state.error.toString())):this.props.children}}]),t}();ae.propTypes={children:re.a.any},ae.defaultProps={};var oe=ae,ie=r(26),se=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function ce(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ue=function(e){function t(){var e,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=ce(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.componentDidMount=function(){var e=n.refs.markdown.querySelectorAll("a");h.a.map(e,function(e){e.onclick=function(t){t.preventDefault(),ee.getRouter().history.push(e.getAttribute("href"))}})},ce(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),se(t,[{key:"render",value:function(){var e=Object(J.getTranslation)(this.props.text,this.props.context.locale,this.props.context.project.defaultLanguage);return c.a.createElement("div",{className:"c-markdown s-text",ref:"markdown",dangerouslySetInnerHTML:{__html:ie.markdown.toHTML(e.text||"")}})}}]),t}();ue.propTypes={context:re.a.object.isRequired,text:re.a.oneOfType([re.a.object,re.a.string]).isRequired},ue.defaultProps={};var le=Object(p.connect)(function(e,t){return Object.assign({context:e.app.context},t)})(ue),pe=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var fe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),pe(t,[{key:"render",value:function(){var e=this.props.data[this.props.tastic.configuration.stream];return e?c.a.createElement("div",{className:"s-text"},h.a.map(e.attributes,function(e){var t="e-content e-content__"+e.type+" e-content__"+e.type+"--"+e.attributeId;switch(e.type){case"Symbol":return c.a.createElement("h1",{className:t,key:e.attributeId},e.content);case"Text":return c.a.createElement("div",{className:t,key:e.attributeId},c.a.createElement(le,{text:e.content}));default:return c.a.createElement("div",{className:t,key:e.attributeId},e.content)}})):null}}]),t}();fe.propTypes={data:re.a.object.isRequired,tastic:re.a.object.isRequired},fe.defaultProps={};var he=fe,de=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var me=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),de(t,[{key:"render",value:function(){var e=this.props.data[this.props.tastic.configuration.stream];return e?c.a.createElement("div",null,c.a.createElement("p",null,c.a.createElement("small",null,"Showing ",e.count," results from ",e.total)),c.a.createElement("ul",null,h.a.map(e.items,function(e){return c.a.createElement("li",{key:e.contentId},c.a.createElement("a",{href:"/"},c.a.createElement("strong",null,e.name),h.a.map(e.attributes,function(e){return"Text"!==e.type?null:c.a.createElement("p",{key:e.attributeId},e.content.substr(0,200),"â€¦")})))}))):null}}]),t}();me.propTypes={data:re.a.object.isRequired,tastic:re.a.object.isRequired},me.defaultProps={};var ye=me,be=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var ge=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),be(t,[{key:"render",value:function(){return this.props.node.configuration.displayDescription?c.a.createElement(le,{text:this.props.node.configuration.displayDescription}):null}}]),t}();ge.propTypes={node:re.a.object.isRequired},ge.defaultProps={};var ve=ge,we=r(10),_e=r.n(we),je=r(7),Ee=r.n(je),Oe=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Pe=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var ke=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.mediaApi=new J.MediaApi,r.state={loading:!0,error:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),Pe(t,[{key:"render",value:function(){var e=this,t=this.mediaApi.getImageDimensions(this.props.media,this.props.width,this.props.height,this.props.cropRatio),r=Oe(t,2),n=r[0],a=r[1];return this.state.error?c.a.createElement("img",Object.assign({style:this.props.style,width:n,height:a,alt:this.props.media.name,src:Ee.a},h.a.omit(this.props,["context","url","alt","cropRatio","width","height","dispatch","options"]))):c.a.createElement("img",Object.assign({style:this.props.style,className:this.props.className+(this.state.loading?"loading":"loaded"),onLoad:function(){e.setState({loading:!1})},width:n,height:a,alt:this.props.media.name,src:this.mediaApi.getImageLink(this.props.media,this.props.context.project.configuration,this.props.width,this.props.height,this.props.cropRatio,this.props.options),srcSet:h.a.map([1,2],function(t){return[e.mediaApi.getImageLink(e.props.media,e.props.context.project.configuration,e.props.width,e.props.height,e.props.cropRatio,e.props.options),t+"x"].join(" ")}).join(", "),onError:function(){e.setState({error:!0})}},h.a.omit(this.props,["context","media","cropRatio","width","height","dispatch","options"])))}}]),t}();ke.propTypes={context:re.a.object.isRequired,media:re.a.object.isRequired,width:re.a.number.isRequired,height:re.a.number.isRequired,style:re.a.object,cropRatio:re.a.oneOfType([re.a.string,re.a.number]),className:re.a.string,options:re.a.object},ke.defaultProps={style:{},cropRatio:null,className:""};var xe=Object(p.connect)(function(e,t){return Object.assign({},t,{context:e.app.context})})(_e()({getSize:J.MediaApi.getElementDimensions})(ke)),Re=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Te(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ce=function(e){function t(){var e,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=Te(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.optionsFromSettings=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.a.omit(e,["media","ratio","width","height"])},Te(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),Re(t,[{key:"render",value:function(){if(!this.props.node.configuration.displayImage)return null;var e=this.props.node.configuration.displayImage;return c.a.createElement(xe,{media:e.media||{},cropRatio:"5:1",options:this.optionsFromSettings(e),className:"c-hero__image"})}}]),t}();Ce.propTypes={node:re.a.object.isRequired},Ce.defaultProps={};var Ne=Ce,Se=r(6),qe=r.n(Se),Fe=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Ae(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ie=function(e){function t(){var e,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=Ae(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.optionsFromSettings=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.a.omit(e,["media","ratio","width","height"])},Ae(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),Fe(t,[{key:"render",value:function(){var e=this.props.tastic.schema.get("image");if(!e)return null;var t=this.props.tastic.schema.get("size")||"normal",r=this.props.tastic.schema.get("verticalAlign")||"center",n=this.props.tastic.schema.get("horizontalAlign")||"center";return c.a.createElement("div",{className:"c-hero"},c.a.createElement("figure",{className:"c-hero__figure o-ratio__content"},c.a.createElement(xe,{media:e.media||{},cropRatio:e.ratio||"1:1",options:this.optionsFromSettings(e),className:"c-hero__image"}),c.a.createElement("figcaption",{className:qe()(["c-hero__caption","c-hero__caption--"+t,"c-hero__caption--"+r,"c-hero__caption--"+n])},Object(J.getTranslation)(this.props.tastic.schema.get("caption"),this.props.context.locale,this.props.context.project.defaultLanguage).text)))}}]),t}();Ie.propTypes={tastic:re.a.object.isRequired,context:re.a.object.isRequired},Ie.defaultProps={};var Me=Object(p.connect)(function(e,t){return Object.assign({},t,{context:e.app.context})})(Ie),De=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Ve=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),De(t,[{key:"render",value:function(){return c.a.createElement(le,{text:this.props.tastic.schema.get("text")})}}]),t}();Ve.propTypes={tastic:re.a.object.isRequired},Ve.defaultProps={};var Be=Ve,Le=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Ue=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),Le(t,[{key:"render",value:function(){var e=h.a.omit(this.props,["route","params","router","dispatch"]),t=h.a.extend({},this.props.params);if(this.props.to||this.props.href)throw new Error("Use route parameter with Symfony route ID to link '"+(this.props.to||this.props.href)+"'");return c.a.createElement(l.Link,Object.assign({to:this.props.path||this.props.router.path(this.props.route,t)},e),this.props.children)}}]),t}();Ue.propTypes={router:re.a.object.isRequired,route:re.a.string,path:re.a.string,params:re.a.object,to:re.a.string,href:re.a.string,children:re.a.any},Ue.defaultProps={path:"",route:null,params:{}};var ze=Object(p.connect)(function(e,t){return Object.assign({},t,{router:ee.getRouter()})})(Ue),He=r(25),We=r.n(He),Ke=r(24),Ge=r.n(Ke),Je=r(9),Ze=r.n(Je),Qe=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Ye(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Xe=function(e){function t(){var e,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=Ye(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.locale=function(){return n.props.context.locale.replace("_","-")},Ye(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),Qe(t,[{key:"render",value:function(){return(this.props.value/100).toLocaleString(this.locale(),{style:"currency",currency:this.props.currency})}}]),t}();Xe.propTypes={context:re.a.object.isRequired,value:re.a.number.isRequired,currency:re.a.string.isRequired},Xe.defaultProps={value:0};var $e=Object(p.connect)(function(e,t){return Object.assign({context:e.app.context},t)})(Xe),et=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var tt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={showBasket:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),et(t,[{key:"render",value:function(){var e=this,t=this.props.basket.getItems();return c.a.createElement(s.Fragment,null,c.a.createElement("button",{className:"c-button c-navbar__button c-cart-link","aria-label":"Mein Warenkorb",onClick:function(){e.setState({showBasket:!0})}},c.a.createElement("img",{className:"o-icon","data-icon":"cart","data-icon-size":"base",src:Ge.a,alt:"Cart"}),c.a.createElement("span",{className:"c-cart-link__badge c-badge c-badge--tiny"},this.props.basket.getProductCount())),c.a.createElement("div",{className:"c-overlay"+(this.state.showBasket?" is-visible":"")},c.a.createElement("nav",{className:"c-sequential-nav","data-ft-sequential-nav":""},c.a.createElement("div",{className:"c-sequential-nav__panel c-sequential-nav__panel--level-1"},c.a.createElement("div",{className:"c-sequential-nav__header"},c.a.createElement("h3",{className:"c-sequential-nav__title"},"Mein Warenkorb"),c.a.createElement("button",{className:"c-sequential-nav__primary-action c-button",onClick:function(){e.setState({showBasket:!1})}},c.a.createElement("img",{className:"o-icon","data-icon":"cross","data-icon-size":"base",src:Ze.a,alt:"Close"}))),c.a.createElement("div",{className:"c-sequential-nav__content"},c.a.createElement("table",{className:"o-table o-table--small"},c.a.createElement("tbody",null,t.length?h.a.map(t,function(e){return c.a.createElement("tr",{key:e.product.productId+"_"+e.variant.id},c.a.createElement("td",null,e.product.name),c.a.createElement("td",{align:"right"},e.count),c.a.createElement("td",{align:"right"},c.a.createElement($e,{value:e.variant.price,currency:e.variant.currency})),c.a.createElement("td",{align:"right"},c.a.createElement($e,{value:e.variant.price*e.count,currency:e.variant.currency})))}):c.a.createElement("tr",null,c.a.createElement("td",null,"Nothing in hereâ€¦"))),c.a.createElement("tfoot",null,c.a.createElement("tr",null,c.a.createElement("th",{colSpan:"3",align:"left"},"Sum"),c.a.createElement("th",{align:"right"},c.a.createElement($e,{currency:"EUR",value:h.a.sumBy(t,function(e){return e.variant.price*e.count})})))))),c.a.createElement("div",{className:"c-sequential-nav__footer"},c.a.createElement("button",{disabled:!0,className:"c-sequential-nav__primary-action c-button c-button--primary",onClick:function(){e.setState({showBasket:!1})}},"Checkout"))))))}}]),t}();tt.propTypes={basket:re.a.instanceOf(w).isRequired},tt.defaultProps={};var rt=Object(p.connect)(function(e,t){return{basket:e.basket.basket}})(tt),nt=r(23),at=r.n(nt),ot=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var it=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),ot(t,[{key:"render",value:function(){return c.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",xlinkHref:"http://www.w3.org/1999/xlink"},h.a.omit(this.props,["icon"])),c.a.createElement("use",{xlinkHref:at.a+"#"+this.props.icon}))}}]),t}();it.propTypes={icon:re.a.string.isRequired,className:re.a.string},it.defaultProps={className:"o-icon"};var st=it,ct=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var ut=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={showChildNavigation:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),ct(t,[{key:"render",value:function(){var e=this;return c.a.createElement(s.Fragment,null,c.a.createElement("div",{className:"c-sequential-nav__panel c-sequential-nav__panel--level-"+this.props.level+(this.props.pulledLeft?" is-pulled-left":"")},c.a.createElement("div",{className:"c-sequential-nav__header"},this.props.root.name?c.a.createElement("h3",{className:"c-sequential-nav__title"},this.props.root.name):null,c.a.createElement("button",{className:"c-sequential-nav__primary-action c-button",onClick:this.props.onClose},c.a.createElement(st,{icon:1===this.props.level?"cross":"arrow-left"}))),c.a.createElement("div",{className:"c-sequential-nav__content"},c.a.createElement("ul",{className:"c-tableview"},h.a.map(this.props.root.children,function(t){return c.a.createElement("li",{key:t.nodeId,className:"c-tableview__cell"},c.a.createElement(ze,{className:"c-tableview__link"+(t.configuration.displayHighlightMenuItem?" c-tableview__link--primary":""),route:"node_"+t.nodeId},t.name),t.children.length?c.a.createElement("button",{className:"c-button c-tableview__button c-tableview__button--deep",onClick:function(){e.setState({showChildNavigation:t.nodeId})}},c.a.createElement(st,{icon:"chevron-right"})):null)})))),h.a.map(this.props.root.children,function(r){return r.children.length?c.a.createElement(t,{key:"subtree_"+r.nodeId,root:r,level:e.props.level+1,pulledLeft:e.state.showChildNavigation===r.nodeId,onClose:function(){e.setState({showChildNavigation:null})}}):null}))}}]),t}();ut.propTypes={root:re.a.object.isRequired,onClose:re.a.func.isRequired,pulledLeft:re.a.bool,level:re.a.number},ut.defaultProps={pulledLeft:!1,level:1};var lt=ut,pt=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var ft=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={showNavigation:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),pt(t,[{key:"componentDidMount",value:function(){var e=this.props.tastic.schema.get("root");e&&ee.getLoader("node").loadTree({root:e,depth:this.props.tastic.schema.get("depth")})}},{key:"render",value:function(){var e=this,t=this.props.tastic.schema.get("logo")||null;return c.a.createElement(s.Fragment,null,c.a.createElement("div",{className:"c-navbar"},c.a.createElement("button",{className:"c-button",disabled:!this.props.tree.isComplete()||!this.props.tree.data.children.length,onClick:function(){e.setState({showNavigation:!0})}},c.a.createElement(st,{icon:"menu"})),c.a.createElement(ze,{path:"/",className:"c-logo c-navbar__logo"},t&&t.media?c.a.createElement("img",{className:"c-navbar__logo-image",src:t.media.file,alt:"Frontastic"}):c.a.createElement("img",{className:"c-navbar__logo-image",src:We.a,alt:"Frontastic"})),this.props.tastic.schema.get("showSearch")?c.a.createElement("button",{className:"c-button c-navbar__button",disabled:!0},c.a.createElement(st,{icon:"search"})):null,this.props.tastic.schema.get("showBasket")?c.a.createElement(rt,null):null,this.props.tree.isComplete()&&this.props.tree.data.children.length?c.a.createElement("div",{className:"c-overlay"+(this.state.showNavigation?" is-visible":"")},c.a.createElement("nav",{className:"c-sequential-nav","data-ft-sequential-nav":""},c.a.createElement(lt,{root:this.props.tree.data,onClose:function(){e.setState({showNavigation:!1})}}))):null),c.a.createElement("div",{className:"c-navbar__spacing"}))}}]),t}();ft.propTypes={tree:re.a.object.isRequired,data:re.a.object.isRequired,tastic:re.a.object.isRequired},ft.defaultProps={};var ht=Object(p.connect)(function(e,t){return Object.assign({},t,{tree:e.node.trees[t.tastic.configuration.root||"root"]||new g})})(ft),dt=function(e,t){var r=t.data[t.tastic.configuration.stream];if(!r)return console.warn("No product could be found in streams"),Object.assign({},t);var n=e.app.route.get("_variant",0),a=r.variants[n]||null;return a?(a.originalPrice=Math.round(a.price*(r.name.charCodeAt(1)%4)),Object.assign({},t,{product:r,variant:a,selectedVariant:+n})):(console.warn("Product variants are always required"),Object.assign({},t))},mt=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var yt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),mt(t,[{key:"render",value:function(){if(!this.props.product||!this.props.variant)return null;var e=this.props.tastic.schema.get("level");return c.a.createElement("div",{className:"c-page-section"},c.a.createElement(e,{className:"c-heading-gamma"},this.props.product.name))}}]),t}();yt.propTypes={tastic:re.a.object.isRequired,product:re.a.object,variant:re.a.object},yt.defaultProps={product:null,variant:null};var bt=Object(p.connect)(dt)(yt),gt=r(22),vt=r.n(gt),wt=r(12),_t=r.n(wt),jt=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Et=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.componentDidMount=function(){r.flickity=new vt.a(r.refs.carousel,h.a.extend({cellSelector:".c-slider__item",cellAlign:"left",pageDots:!1,prevNextButtons:!1,contain:!0,draggable:">1"},r.props.options)),r.flickity.on("cellSelect",r.updateSelected),r.props.imagesLoaded&&_t()(r.refs.carousel,function(){r.flickity.resize()})},r.componentDidUpdate=function(){r.flickity.reloadCells(),r.props.imagesLoaded&&_t()(r.refs.carousel,function(){r.flickity.resize()})},r.componentWillUnmount=function(){r.flickity&&(r.flickity.off("cellSelect",r.updateSelected),r.flickity.destroy())},r.componentDidCatch=function(e,t){r.setState({selected:0,error:e})},r.updateSelected=function(){r.setState({selected:r.flickity.selectedIndex})},r.state={selected:0,error:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),jt(t,[{key:"render",value:function(){return c.a.createElement("div",{className:this.props.className,ref:"carousel"},c.a.createElement("div",{className:"flickity-viewport"},c.a.createElement("div",{className:"flickity-slider"},this.props.children)))}}]),t}();Et.propTypes={imagesLoaded:re.a.bool,options:re.a.object,className:re.a.string,children:re.a.array},Et.defaultProps={imagesLoaded:!0,options:{},className:"c-slider js-slider"};var Ot=Et,Pt=r(21),kt=r.n(Pt),xt=r(20),Rt=r.n(xt),Tt=r(19),Ct=r.n(Tt),Nt=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var St=0,qt=0,Ft=1,At=function(e,t,r){return e>t-r&&e<t||e<t+r&&e>t?t:e},It=function(e){return-1*e},Mt=function(e,t){var r=t.getBoundingClientRect();return{x:e.clientX-r.left,y:e.clientY-r.top}},Dt=function(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))},Vt=function(e,t,r){return Math.min(t,Math.max(e,r))},Bt=function(e,t,r){return e<t?Vt(e,t,r):Vt(t,e,r)},Lt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Ut.call(r),r.state={x:St,y:qt,scale:Ft,width:e.width,height:e.height},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),Nt(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{ref:function(t){e.container=t},onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,onWheel:this.handleWheel,style:{overflow:"hidden",width:this.props.width,height:this.props.height}},this.props.children(this.state.x,this.state.y,this.state.scale),c.a.createElement("div",{className:"c-button-overlay"},c.a.createElement("button",{onClick:function(){e.handleClick(!0)},className:"c-button u-margin-bottom-tiny c-button--small"},c.a.createElement("img",{src:Rt.a,width:"24",height:"24",alt:"Zoom In"})),c.a.createElement("button",{onClick:function(){e.handleClick(!1)},className:"c-button u-margin-bottom-tiny c-button--small"},c.a.createElement("img",{src:kt.a,width:"24",height:"24",alt:"Zoom Out"})),c.a.createElement("button",{className:"c-button u-margin-bottom-tiny c-button--small",onClick:function(){e.reset()}},c.a.createElement("img",{src:Ct.a,width:"24",height:"24",alt:"Reset Zoom"}))))}}]),t}(),Ut=function(){var e=this;this.componentWillReceiveProps=function(t){e.setState({x:St,y:qt,scale:Ft,width:t.width,height:t.height})},this.zoomTo=function(t,r){e.animation=requestAnimationFrame(function n(){if(e.state.scale===t)return null;var a=t-e.state.scale,o=e.state.scale+.04*a;e.zoom(At(o,t,.001),r),e.animation=requestAnimationFrame(n)})},this.reset=function(){e.animation=requestAnimationFrame(function t(){if(e.state.scale===Ft&&e.state.x===St&&e.state.y===qt)return null;var r=Ft-e.state.scale,n=St-e.state.x,a=qt-e.state.y,o=At(e.state.scale+.16*r,Ft,.001),i=At(e.state.x+.16*n,St,.001),s=At(e.state.y+.16*a,qt,.001),c=e.props.width*o,u=e.props.height*o;e.setState({x:i,y:s,scale:o,width:c,height:u},function(){e.animation=requestAnimationFrame(t)})})},this.handleTouchStart=function(t){e.animation&&cancelAnimationFrame(e.animation),2===t.touches.length&&e.handlePinchStart(t),1===t.touches.length&&e.handleTapStart(t)},this.handleTouchMove=function(t){2===t.touches.length&&e.handlePinchMove(t),1===t.touches.length&&e.handlePanMove(t)},this.handleTouchEnd=function(t){return t.touches.length>0?null:e.state.scale>4?e.zoomTo(4,e.lastMidpoint):e.state.scale<1?e.zoomTo(1,e.lastMidpoint):(e.lastTouchEnd&&e.lastTouchEnd+300>t.timeStamp&&e.reset(),void(e.lastTouchEnd=t.timeStamp))},this.handleTapStart=function(t){e.lastPanPoint=Mt(t.touches[0],e.container)},this.handlePanMove=function(t){if(1===e.state.scale)return null;t.preventDefault();var r=Mt(t.touches[0],e.container),n=e.state.x+r.x-e.lastPanPoint.x,a=e.state.y+r.y-e.lastPanPoint.y;e.setState({x:Vt(e.props.width-e.state.width,0,n),y:Vt(e.props.height-e.state.height,0,a)}),e.lastPanPoint=r},this.handlePinchStart=function(t){var r=Mt(t.touches[0],e.container),n=Mt(t.touches[1],e.container);e.lastDistance=Dt(r,n)},this.handlePinchMove=function(t){t.preventDefault();var r=Mt(t.touches[0],e.container),n=Mt(t.touches[1],e.container),a=Dt(r,n),o=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}(r,n),i=Vt(.8,4.2,e.state.scale*(a/e.lastDistance));e.zoom(i,o),e.lastMidpoint=o,e.lastDistance=a},this.handleWheel=function(t){t.preventDefault(),t.stopPropagation();var r=Mt(t,e.container),n=Vt(.8,4.2,e.state.scale*(1-t.deltaY/100));e.zoom(n,r),e.lastMidpoint=r,e.lastDistance=0},this.handleClick=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r={x:e.props.width/2,y:e.props.height/2};e.zoom(e.state.scale*(t?1.5:.75),r),e.lastMidpoint=r,e.lastDistance=0},this.zoom=function(t,r){var n=e.props.width*t,a=e.props.height*t,o=e.state.x+It(r.x*t)*(n-e.state.width)/n,i=e.state.y+It(r.y*t)*(a-e.state.height)/a;e.setState({width:n,height:a,x:Bt(0,e.props.width-n,o),y:Bt(0,e.props.height-a,i),scale:t})}};Lt.propTypes={children:re.a.func.isRequired,width:re.a.number.isRequired,height:re.a.number.isRequired};var zt=Lt,Ht=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Wt=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Kt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.mediaApi=new J.MediaApi,r.state={loading:!0,error:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),Wt(t,[{key:"render",value:function(){var e=this,t=this.mediaApi.getImageDimensions(this.props.url,this.props.width,this.props.height,this.props.cropRatio),r=Ht(t,2),n=r[0],a=r[1];return this.state.error?c.a.createElement("img",Object.assign({style:this.props.style,width:n,height:a,alt:this.props.alt,src:Ee.a},h.a.omit(this.props,["context","url","alt","cropRatio","width","height","dispatch","options"]))):c.a.createElement("img",Object.assign({style:this.props.style,className:this.state.loading?"loading":"loaded",onLoad:function(){e.setState({loading:!1})},width:n,height:a,alt:this.props.alt,src:this.mediaApi.getImageLink(this.props.url,this.props.context.project.configuration,this.props.width,this.props.height,this.props.cropRatio,this.props.options),srcSet:h.a.map([1,2],function(t){return[e.mediaApi.getImageLink(e.props.url,e.props.context.project.configuration,e.props.width,e.props.height,e.props.cropRatio,e.props.options),t+"x"].join(" ")}).join(", "),onError:function(){e.setState({error:!0})}},h.a.omit(this.props,["context","url","alt","cropRatio","width","height","dispatch","options"])))}}]),t}();Kt.propTypes={context:re.a.object.isRequired,url:re.a.string.isRequired,alt:re.a.string.isRequired,width:re.a.number.isRequired,height:re.a.number.isRequired,style:re.a.object,cropRatio:re.a.oneOfType([re.a.string,re.a.number]).isRequired,options:re.a.object},Kt.defaultProps={style:{},cropRatio:null};var Gt=Object(p.connect)(function(e,t){return Object.assign({},t,{context:e.app.context})})(_e()({getSize:J.MediaApi.getElementDimensions})(Kt)),Jt=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Zt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.componentDidMount=function(){r.setState({width:r.refs.section.clientWidth})},r.state={width:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),Jt(t,[{key:"render",value:function(){var e=this;if(!this.props.product||!this.props.variant)return null;var t=h.a.uniq(h.a.flatten(h.a.map(this.props.product.variants,"images")));return t.length||t.push(Ee.a),c.a.createElement("div",{className:"c-page-section",ref:"section"},c.a.createElement(Ot,null,h.a.map(t,function(t){return c.a.createElement("figure",{className:"c-slider__item js-slider__item c-figure",key:t},e.state.width?c.a.createElement(zt,{width:e.state.width,height:e.state.width/3*2},function(r,n,a){return c.a.createElement(Gt,{style:{pointerEvents:1===a?"auto":"none",transform:"translate3d("+r+"px, "+n+"px, 0) scale("+a+")",transformOrigin:"0 0"},className:"c-teaser__image",url:t,alt:e.props.product.name,cropRatio:"3:2",options:{crop:"pad",background:"white"}})}):null)})))}}]),t}();Zt.propTypes={product:re.a.object,variant:re.a.object},Zt.defaultProps={product:null,variant:null};var Qt=Object(p.connect)(dt)(Zt),Yt=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Xt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),Yt(t,[{key:"render",value:function(){if(!this.props.product||!this.props.variant)return null;var e=this.props.tastic.schema.get("showPercent"),t=this.props.tastic.schema.get("showStrikePrice"),r=this.props.variant.originalPrice>this.props.variant.price;return c.a.createElement("div",{className:"c-page-section"},c.a.createElement("ul",{className:"c-price-list"},c.a.createElement("li",{className:"c-price-list__item"},c.a.createElement("span",{className:qe()({"c-price":!0,"u-text-l":!0,"c-price--highlight":r&&(e||t)})},c.a.createElement($e,{value:this.props.variant.price,currency:this.props.variant.currency}))),this.props.variant.originalPrice&&this.props.variant.originalPrice>this.props.variant.price?c.a.createElement(s.Fragment,null,t?c.a.createElement("li",{className:"c-price-list__item"},c.a.createElement("span",{className:"c-price  c-price--old"},c.a.createElement("del",null,c.a.createElement($e,{value:this.props.variant.originalPrice,currency:this.props.variant.currency})))):null,e?c.a.createElement("li",{className:"c-price-list__item"},c.a.createElement("span",{className:"c-highlight"},"Save ",100-Math.ceil(this.props.variant.price/this.props.variant.originalPrice*100)," %")):null):null))}}]),t}();Xt.propTypes={tastic:re.a.object.isRequired,product:re.a.object,variant:re.a.object},Xt.defaultProps={product:null,variant:null};var $t=Object(p.connect)(dt)(Xt),er=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var tr=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.ucfirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},r.selectVariant=function(e){var t=h.a.extend({},r.props.route.parameters,{_variant:e});ee.getRouter().replace(r.props.route.route,t)},r.addToCart=function(e){ee.getLoader("basket").add(r.props.product,r.props.variant,1),r.setState({indicateBaskedAdded:!0},h.a.debounce(function(){r.setState({indicateBaskedAdded:!1})},600))},r.getVariantAttributes=function(){var e={},t=!0,n=!1,a=void 0;try{for(var o,i=r.props.product.variants[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value;for(var c in s.attributes)e[c]||(e[c]=[]),e[c].push(s.attributes[c])}}catch(e){n=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw a}}return h.a.keys(h.a.pickBy(h.a.mapValues(e,h.a.uniq),function(e){return e.length>1}))},r.state={indicateBaskedAdded:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),er(t,[{key:"render",value:function(){var e=this;if(!this.props.product||!this.props.variant)return null;var t=this.props.tastic.schema.get("showVariants")||!0,r=this.props.tastic.schema.get("showNameInVariants")||!1,n=this.props.tastic.schema.get("showPriceInVariants")||!0,a=h.a.intersection(this.getVariantAttributes(),this.props.tastic.schema.get("variantAttributes")||["color","size","style"]);return c.a.createElement("div",{className:"c-page-section"},c.a.createElement(st,{className:qe()("o-icon  c-figure__icon  c-badge  c-badge--invert",{"fade-exiting":!this.state.indicateBaskedAdded,"fade-appeared":this.state.indicateBaskedAdded}),icon:"check","data-icon-size":"xxl"}),c.a.createElement("form",{className:"c-form",action:""},t||this.props.product.variants.length>1?c.a.createElement("div",{className:"c-form__item"},c.a.createElement("select",{className:"c-form__select",value:this.props.selectedVariant,onChange:function(t){e.selectVariant(t.currentTarget.value)}},h.a.map(this.props.product.variants,function(t,o){return c.a.createElement("option",{value:o,key:o},r?e.props.product.name+" ":null,h.a.map(a,function(r){return e.ucfirst(r)+": "+t.attributes[r]}).join("; "),n?" â€“ "+(t.price/100).toLocaleString(e.props.context.locale.replace("_","-"),{style:"currency",currency:t.currency}):null)}))):null,c.a.createElement("div",{className:"c-form__item"},c.a.createElement("button",{disabled:!this.props.variant.isOnStock,className:"c-button  c-button--primary  c-button--full",onClick:function(t){t.preventDefault(),e.addToCart(e.props.selectedVariant)}},"Add to cart"))))}}]),t}();tr.propTypes={context:re.a.object.isRequired,route:re.a.object.isRequired,tastic:re.a.object.isRequired,product:re.a.object,variant:re.a.object,selectedVariant:re.a.number},tr.defaultProps={product:null,variant:null,selectVariant:0};var rr=Object(p.connect)(function(e,t){return Object.assign({context:e.app.context,route:e.app.route},t)})(Object(p.connect)(dt)(tr)),nr=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var ar=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),nr(t,[{key:"ucFirst",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"render",value:function(){var e=this;if(!this.props.product)return null;if(this.props.variant&&!this.props.product.description){return c.a.createElement("div",{className:"s-text"},c.a.createElement("ul",null,h.a.map(["color","designer","size","style"],function(t){return e.props.variant.attributes[t]?c.a.createElement("li",{key:t},c.a.createElement("strong",null,e.ucFirst(t)),": ",e.props.variant.attributes[t]):null})))}return c.a.createElement(le,{text:this.props.product.description})}}]),t}();ar.propTypes={product:re.a.object,variant:re.a.object},ar.defaultProps={product:null,variant:null};var or=Object(p.connect)(dt)(ar),ir=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var sr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),ir(t,[{key:"render",value:function(){return c.a.createElement(s.Fragment,null,c.a.createElement(Qt,{data:this.props.data,tastic:this.props.tastic}),c.a.createElement(bt,{data:this.props.data,tastic:this.props.tastic}),c.a.createElement($t,{data:this.props.data,tastic:this.props.tastic}),c.a.createElement(rr,{data:this.props.data,tastic:this.props.tastic}),c.a.createElement(or,{data:this.props.data,tastic:this.props.tastic}))}}]),t}();sr.propTypes={data:re.a.object.isRequired,tastic:re.a.object.isRequired},sr.defaultProps={};var cr=sr,ur=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var lr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),ur(t,[{key:"render",value:function(){if(!this.props.product||!this.props.variant||!this.props.variant.attributes.designer)return null;var e=this.props.tastic.schema.get("level");return c.a.createElement("div",{className:"c-page-section"},c.a.createElement(e,{className:"c-heading-zeta"},this.props.variant.attributes.designer))}}]),t}();lr.propTypes={tastic:re.a.object.isRequired,product:re.a.object,variant:re.a.object},lr.defaultProps={product:null,variant:null};var pr=Object(p.connect)(dt)(lr),fr=r(11),hr=r(18),dr=r.n(hr),mr=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function yr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var br=function(e){function t(){var e,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=yr(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},n.getNextOrderTime=function(){var e=new Date;return e.setHours(17),e.setMinutes(0),e<new Date&&e.setDate(e.getDate()+1),e},n.getNextDeliveryDay=function(){var e=new Date;for(e.setDate(e.getDate()+2);e.getDay()<2;)e.setDate(e.getDate()+2);return e},yr(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),mr(t,[{key:"render",value:function(){return this.props.variant?this.props.variant.isOnStock?c.a.createElement("div",{className:"o-layout o-layout-small"},c.a.createElement("div",{className:"o-layout__item u-1/4",align:"right"},c.a.createElement("img",{src:dr.a,alt:"Fast Delivery"})),c.a.createElement("div",{className:"o-layout__item u-3/4"},c.a.createElement("p",null,c.a.createElement("strong",null,"Express Delivery"),": Order in the next ",c.a.createElement("em",null,c.a.createElement(fr.FormattedRelative,{value:this.getNextOrderTime()}))," for a delivery until ",c.a.createElement("em",null,c.a.createElement(fr.FormattedDate,{value:this.getNextDeliveryDay(),day:"numeric",month:"long"})),"."))):c.a.createElement("p",null,"Variant sold out right now."):null}}]),t}();br.propTypes={variant:re.a.object},br.defaultProps={variant:null};var gr=Object(p.connect)(dt)(br),vr=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var wr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),vr(t,[{key:"render",value:function(){var e=this.props.product,t=this.props.variant||e.variants[0];t.originalPrice=Math.round(t.price*(e.name.charCodeAt(1)%4));var r=t.originalPrice>t.price;return c.a.createElement("article",{className:"c-teaser  o-block",itemScope:!0,itemType:"http://schema.org/Product"},c.a.createElement(ze,{itemProp:"url",className:"c-teaser__full-link",route:"Frontastic.Frontend.Master.Product.view",params:{id:e.productId,slug:e.slug}},c.a.createElement("figure",{className:"c-teaser__figure  o-block__figure"},c.a.createElement(Gt,{className:"c-teaser__image",url:t.images[0]||Ee.a,alt:e.name,cropRatio:"1:1",itemProp:"image",options:{crop:"pad",background:"white"}})),c.a.createElement("div",{className:"o-block__body"},c.a.createElement("div",{className:"c-teaser__body"},c.a.createElement("div",{className:"c-teaser__caption"},c.a.createElement("h3",{className:"c-teaser__title  c-heading-teaser",itemProp:"name"},e.name),t.attributes.designer?c.a.createElement("div",{className:"c-heading-teaser-subheading"},t.attributes.designer):null),c.a.createElement("div",{className:"c-teaser__prices",itemScope:!0,itemType:"http://schema.org/Offer"},c.a.createElement("span",{itemProp:"price",className:qe()({"c-teaser__price":!0,"c-price":!0,"c-price--highlight":r&&(this.props.showPercent||this.props.showStrikePrice)})},c.a.createElement($e,{value:t.price,currency:t.currency})),r&&this.props.showStrikePrice?c.a.createElement("span",{className:"c-price  c-price--old"},c.a.createElement("del",null,c.a.createElement($e,{value:t.originalPrice,currency:t.currency}))):null,r&&this.props.showPercent?c.a.createElement("span",{className:"c-highlight"},"-Â ",100-Math.ceil(t.price/t.originalPrice*100),"%"):null)))))}}]),t}();wr.propTypes={product:re.a.object.isRequired,variant:re.a.object,showStrikePrice:re.a.bool,showPercent:re.a.bool},wr.defaultProps={showStrikePrice:!0,showPercent:!0,variant:null};var _r=wr,jr=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Er=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),jr(t,[{key:"render",value:function(){var e=this.props.data[this.props.tastic.configuration.stream];if(!e)return null;var t=this.props.tastic.schema.get("showPercent")||!0,r=this.props.tastic.schema.get("showStrikePrice")||!0;return c.a.createElement("div",{className:"o-layout"},h.a.map(e.items,function(e){return c.a.createElement("div",{key:e.productId,className:"o-layout__item u-1/2 u-1/3@lap u-1/4@desk"},c.a.createElement(_r,{product:e,showPercent:t,showStrikePrice:r}))}))}}]),t}();Er.propTypes={data:re.a.object.isRequired,tastic:re.a.object.isRequired},Er.defaultProps={};var Or=Er,Pr=r(17),kr=r.n(Pr),xr=(r(35),r(16)),Rr=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Tr=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Cr.call(r),r.state={range:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["PureComponent"]),Rr(t,[{key:"render",value:function(){var e=this,t=this.props.facet.min,r=this.props.facet.max,n=this.props.facet.step||1;return c.a.createElement("div",{className:"c-range-selector"},c.a.createElement("form",{className:"c-form",action:""},c.a.createElement("div",{className:"c-range-selector__text-fields"},c.a.createElement("div",{className:"c-form__item-inline"},c.a.createElement("input",{name:"price-range-min",type:"number",className:"c-form__input-text",value:(this.state.range[0]/100).toFixed(2),min:t/100,max:this.state.range[1]/100,step:n/100,onChange:this.updateLower})),c.a.createElement("div",{className:"c-form__item-inline"},c.a.createElement("input",{name:"price-range-max",type:"number",className:"c-form__input-text",value:(this.state.range[1]/100).toFixed(2),min:this.state.range[0]/100,max:r/100,step:n/100,onChange:this.updateUpper}))),c.a.createElement("div",{className:"c-form__item"},c.a.createElement(xr.Range,{min:t,max:r,step:n,value:this.state.range,allowCross:!1,onChange:function(t){e.updateRange(t)},trackStyle:[{backgroundColor:"black"},{backgroundColor:"black"}],handleStyle:[{borderColor:"black"},{borderColor:"black"}],railStyle:{backgroundColor:"grey"}}))))}}]),t}();Tr.getDerivedStateFromProps=function(e,t){return t.range&&e.valueFromTastic?null:{range:[h.a.toInteger((e.facetValue||{}).min||e.facet.min),h.a.toInteger((e.facetValue||{}).max||e.facet.max)]}};var Cr=function(){var e=this;this.updateRange=function(t){e.setState({range:h.a.cloneDeep(t)},e.updateFacet)},this.updateLower=function(t){var r=h.a.cloneDeep(e.state.range);r[0]=Math.floor(100*t.currentTarget.value),e.updateRange(r)},this.updateUpper=function(t){var r=h.a.cloneDeep(e.state.range);r[1]=Math.ceil(100*t.currentTarget.value),e.updateRange(r)},this.updateFacet=h.a.debounce(function(){h.a.isEqual(e.state.range,[e.props.facet.min,e.props.facet.max])?e.props.removeFacetValue(e.props.facet):e.props.selectFacetValue(e.props.facet,{min:e.state.range[0],max:e.state.range[1]})},100)};Tr.propTypes={facet:re.a.object.isRequired,facetValue:re.a.object,valueFromTastic:re.a.bool,selectFacetValue:re.a.func.isRequired,removeFacetValue:re.a.func.isRequired},Tr.defaultProps={valueFromTastic:!1};var Nr=Tr,Sr=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var qr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),Sr(t,[{key:"render",value:function(){return c.a.createElement(s.Fragment,null,c.a.createElement("span",null,this.props.name||this.props.facet.key),this.props.facet.selected?c.a.createElement("span",null,c.a.createElement("span",null," ("),c.a.createElement($e,{value:parseInt(this.props.facet.value.min,10),currency:"EUR"}),c.a.createElement("span",null," - "),c.a.createElement($e,{value:parseInt(this.props.facet.value.max,10),currency:"EUR"}),c.a.createElement("span",null,")")):null)}}]),t}();qr.propTypes={facet:re.a.object.isRequired,name:re.a.string},qr.defaultProps={};var Fr=qr;var Ar=function(e,t,r,n){var a=h.a.filter(e.terms,{selected:!0});h.a.includes(a,t)?h.a.pull(a,t):a.push(t),a.length?r(e,{terms:h.a.map(a,function(e){return e.handle})}):n(e)},Ir=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Mr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),Ir(t,[{key:"render",value:function(){var e=this,t=this.props.facet;return c.a.createElement("ul",{className:"c-tableview"},h.a.map(t.terms,function(r){return c.a.createElement("li",{key:r.handle,className:"c-tableview__cell"},c.a.createElement("button",{className:"c-button c-tableview__button"+(r.selected?" is-active":""),onClick:function(){Ar(t,r,e.props.selectFacetValue,e.props.removeFacetValue)}},r.name))}))}}]),t}();Mr.propTypes={facet:re.a.object.isRequired,selectFacetValue:re.a.func.isRequired,removeFacetValue:re.a.func.isRequired},Mr.defaultProps={};var Dr=Mr,Vr=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Br(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Lr=function(e){function t(){var e,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=Br(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.renderSelectionPreview=function(e){var t=h.a.map(h.a.filter(e,"selected"),function(e){return e.name});return h.a.slice(t,0,3).join(", ")+(t.length>3?", â€¦":"")},Br(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),Vr(t,[{key:"render",value:function(){return c.a.createElement(s.Fragment,null,this.props.name||this.props.facet.key,this.props.facet.selected?" ("+this.renderSelectionPreview(this.props.facet.terms)+")":null)}}]),t}();Lr.propTypes={facet:re.a.object.isRequired,name:re.a.string},Lr.defaultProps={};var Ur=Lr,zr=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Hr=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.facetMap={"variants.attributes.style.key":{name:"Style",selector:Dr,title:Ur},"variants.price.centAmount":{name:"Price",selector:Nr,title:Fr},"variants.attributes.gender.key":{name:"Gender",selector:Dr,title:Ur},"variants.attributes.designer":{name:"Designer",selector:Dr,title:Ur},"variants.attributes.color.key":{name:"Color",selector:Dr,title:Ur}},r.getFacetValue=function(e){return r.props.facetValues[e.handle]||null},r.renderFacetPane=function(e){var t=r.facetMap[e.key].selector;return c.a.createElement("div",{key:"details-"+e.handle,className:"c-sequential-nav__panel c-sequential-nav__panel--level-2"+(r.state.displayFacetDetails===e.key?" is-pulled-left":"")},c.a.createElement("div",{className:"c-sequential-nav__header"},c.a.createElement("h3",{className:"c-sequential-nav__title"},r.facetMap[e.key].name),c.a.createElement("button",{className:"c-sequential-nav__primary-action c-button",onClick:r.closeFacet},c.a.createElement("img",{className:"o-icon","data-icon":"cross","data-icon-size":"base",src:kr.a,alt:"Return"}))),c.a.createElement("div",{className:"c-sequential-nav__content"},c.a.createElement(t,{facet:e,facetValue:r.getFacetValue(e),valueFromTastic:r.props.valuesFromTastic,selectFacetValue:r.props.selectFacetValue,removeFacetValue:r.props.removeFacetValue})))},r.showFacet=function(e){r.setState({displayFacetDetails:e.key})},r.closeFacet=function(){r.setState({displayFacetDetails:null})},r.state={displayFacetDetails:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),zr(t,[{key:"render",value:function(){var e=this,t=h.a.filter(this.props.facets,function(t){return e.facetMap[t.key]});return c.a.createElement(s.Fragment,null,c.a.createElement("div",{className:"c-overlay"+(this.props.show?" is-visible c-overlay-outsidevabar-isvisible":"")},c.a.createElement("nav",{className:"c-sequential-nav","data-ft-sequential-nav":""},c.a.createElement("div",{className:"c-sequential-nav__panel c-sequential-nav__panel--level-1"},c.a.createElement("div",{className:"c-sequential-nav__header"},c.a.createElement("h3",{className:"c-sequential-nav__title"},"Filter"),c.a.createElement("button",{className:"c-sequential-nav__primary-action c-button",onClick:this.props.onClose},c.a.createElement("img",{className:"o-icon","data-icon":"cross","data-icon-size":"base",src:Ze.a,alt:"Close"}))),c.a.createElement("div",{className:"c-sequential-nav__content"},c.a.createElement("ul",{className:"c-tableview"},h.a.map(t,function(t){var r=e.facetMap[t.key].title,n=e.facetMap[t.key].name||null;return c.a.createElement("li",{key:t.handle,className:"c-tableview__cell"},c.a.createElement("button",{className:"c-button c-tableview__button"+(t.selected?" is-active":""),onClick:function(){e.showFacet(t)}},c.a.createElement(r,{facet:t,facetValue:e.getFacetValue(t),name:n})))})))),h.a.map(t,this.renderFacetPane))))}}]),t}();Hr.propTypes={facets:re.a.array.isRequired,facetValues:re.a.object.isRequired,valuesFromTastic:re.a.bool.isRequired,show:re.a.bool.isRequired,onClose:re.a.func.isRequired,selectFacetValue:re.a.func.isRequired,removeFacetValue:re.a.func.isRequired},Hr.defaultProps={show:!1};var Wr=Hr,Kr=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Gr=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.componentDidMount=function(){r.replaceUrl(r.getCurrentStreamParameters())},r.getFacetValues=function(e){return r.props.streamParameters[e]&&r.props.streamParameters[e].facets||{}},r.selectFacetValue=function(e,t){var n=r.getCurrentStreamParameters();h.a.set(n,[r.props.tastic.configuration.stream,"facets",e.handle],h.a.extend({type:e.type,handle:e.handle},t)),r.updateUrl(n)},r.removeFacetValue=function(e){var t=r.getCurrentStreamParameters();h.a.unset(t,[r.props.tastic.configuration.stream,"facets",e.handle]),r.updateUrl(t)},r.updateUrl=function(e){var t=r.deriveRouteParameters({s:e});ee.getRouter().push(r.props.route.route,t,{comeFromTastic:!0})},r.replaceUrl=function(e){var t=r.deriveRouteParameters({s:e});ee.getRouter().replace(r.props.route.route,t,{comeFromTastic:!0})},r.deriveRouteParameters=function(e){return h.a.extend({},h.a.omit(r.props.route.parameters,["nodeId","environment","project","locale"]),e)},r.getCurrentStreamParameters=function(){return h.a.cloneDeep(r.props.route.parameters.s||{})},r.closeFilterSelection=function(){r.setState({showFilterSelection:!1})},r.showFilterSelection=function(){r.setState({showFilterSelection:!0})},r.renderCategorySelector=function(e){var t=r.getCategoryFacet(e.facets);return c.a.createElement("div",{className:"c-filter-bar"},c.a.createElement("fieldset",{className:"c-filter-bar__scrollable"},h.a.map(r.filterCategoryTerms(t.terms),function(e){return c.a.createElement("label",{key:e.handle,className:"c-filter-bar__item",htmlFor:"filter-"+e.handle},c.a.createElement("input",{className:"u-hidden-visually",name:"filter-checkboxes",type:"checkbox",id:"filter-"+e.handle,value:e.selected,onChange:function(n){Ar(t,e,r.selectFacetValue,r.removeFacetValue)}}),c.a.createElement("span",{className:"c-filter-bar__button"},e.name))})))},r.filterCategoryTerms=function(e){return h.a.uniqBy(e,"name")},r.getCategoryFacet=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=null,n=0;n<e.length&&"category_tree_terms"!==(r=e[n]).key;n++);if(!r)throw new Error("No category facet found");return h.a.remove(r.terms,function(e){return"_"===e.value}),r.terms=h.a.take(h.a.reverse(h.a.sortBy(r.terms,"count")),t),r},r.state={showFilterSelection:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),Kr(t,[{key:"render",value:function(){var e=this.props.data[this.props.tastic.configuration.stream];return e&&e.facets&&0!==e.facets.length?c.a.createElement(s.Fragment,null,this.renderCategorySelector(e),c.a.createElement("button",{className:"c-button  c-button--secondary  c-button--full u-margin-bottom","data-ft-sequential-nav-controls":"js-ft-sequential-nav-filter",onClick:this.showFilterSelection},c.a.createElement(st,{icon:"sliders"}),c.a.createElement("span",null,"Filter")),c.a.createElement(Wr,{onClose:this.closeFilterSelection,facets:e.facets,show:this.state.showFilterSelection,selectFacetValue:this.selectFacetValue,removeFacetValue:this.removeFacetValue,facetValues:this.getFacetValues(this.props.tastic.configuration.stream),valuesFromTastic:!!this.props.route.historyState&&this.props.route.historyState.comeFromTastic})):(console.warn("Product list does not contain facets. Won't display filter tastic."),null)}}]),t}();Gr.propTypes={data:re.a.object.isRequired,tastic:re.a.object.isRequired,route:re.a.object.isRequired,streamParameters:re.a.object.isRequired},Gr.defaultProps={};var Jr=Object(p.connect)(function(e,t){var r=e.app.route.parameters.s||{};return Object.assign({},t,{route:e.app.route,streamParameters:r})})(Gr),Zr=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Qr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),Zr(t,[{key:"render",value:function(){var e=this.props.data[this.props.tastic.configuration.stream];if(!e)return null;var t=h.a.take(e.items,this.props.tastic.schema.get("productCount")),r=this.props.tastic.schema.get("showPercent")||!0,n=this.props.tastic.schema.get("showStrikePrice")||!0;return c.a.createElement(Ot,null,h.a.map(t,function(e){return c.a.createElement("div",{className:"c-slider__item  js-slider__item  u-3/4  u-2/5@lap  u-2/7@desk",key:e.productId},c.a.createElement(_r,{product:e,showPercent:r,showStrikePrice:n}))}))}}]),t}();Qr.propTypes={data:re.a.object.isRequired,tastic:re.a.object.isRequired},Qr.defaultProps={};var Yr=Qr,Xr=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var $r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),Xr(t,[{key:"componentDidMount",value:function(){var e=this.props.tastic.schema.get("teaser");e&&ee.getLoader("data").get({app:"teaser",dataId:e})}},{key:"optionsFromSettings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.a.omit(e,["media","ratio","width","height"])}},{key:"render",value:function(){if(!this.props.teaser.isComplete())return null;var e=this.props.teaser.data;return c.a.createElement("div",{className:"o-layout"},c.a.createElement("div",{className:"o-layout__item u-1/2@lap",style:{marginBottom:"1.5em"}},e.image1?c.a.createElement(xe,{media:e.image1.media||{},cropRatio:e.image1.ratio||"3:1",options:this.optionsFromSettings(e.image1)}):null),c.a.createElement("div",{className:"o-layout__item u-1/2@lap"},c.a.createElement(le,{text:e.text2})),c.a.createElement("div",{className:"o-layout__item u-1/2@lap u-hide-until@lap"},c.a.createElement(le,{text:e.text3})),c.a.createElement("div",{className:"o-layout__item u-1/2@lap",style:{marginBottom:"1.5em"}},e.image4?c.a.createElement(xe,{media:e.image4.media||{},cropRatio:e.image4.ratio||"3:1",options:this.optionsFromSettings(e.image4)}):null),c.a.createElement("div",{className:"o-layout__item u-1/2@lap u-hide-from@lap"},c.a.createElement(le,{text:e.text3})))}}]),t}();$r.propTypes={teaser:re.a.object.isRequired,tastic:re.a.object.isRequired},$r.defaultProps={};var en=Object(p.connect)(function(e,t){var r=null;return t.tastic.configuration.teaser&&(r=e.data.data[t.tastic.configuration.teaser]||null),Object.assign({teaser:r||new g},t)})($r),tn=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var rn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),tn(t,[{key:"render",value:function(){var e=Object(J.getTranslation)(this.props.tastic.schema.get("text"),this.props.context.locale,this.props.context.project.defaultLanguage);return c.a.createElement("div",{className:"text"},e.text)}}]),t}();rn.propTypes={context:re.a.object.isRequired,tastic:re.a.object.isRequired},rn.defaultProps={};var nn=Object(p.connect)(function(e,t){return Object.assign({context:e.app.context},t)})(rn),an={content:he,contentList:ye,categoryDescription:ve,categoryImage:Ne,imageBanner:Me,markdown:Be,navigation:ht,productList:Or,productListFilter:Jr,product:cr,"product-title":bt,"product-image":Qt,"product-brand":pr,"product-addToCart":rr,"product-description":or,"product-stock":gr,"product-price":$t,productSlider:Yr,teaser:en,text:nn},on=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var sn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),on(t,[{key:"render",value:function(){var e=this.props.tastic;if(!an[e.tasticType])return c.a.createElement("div",{className:"alert alert-warning"},c.a.createElement("p",null,"Tastic ",e.tasticType," not yet implemented."),c.a.createElement("p",null,"Did you just implement it? Please don't forget to register it in the ",c.a.createElement("code",null,"tastic.jsx"),"!"));var t=an[e.tasticType];return c.a.createElement(oe,null,c.a.createElement("div",{className:"tastic "+(e.schema.get("mobile")?"":"e-tastic--hidden-hand ")+(e.schema.get("tablet")?"":"e-tastic--hidden-lap ")+(e.schema.get("desktop")?"":"e-tastic--hidden-desk "),style:{outline:h.a.isEqual(e.tasticId,this.props.highlight)?"2px dashed #d73964":null}},c.a.createElement(t,{tastic:e,node:this.props.node,page:this.props.page,data:this.props.data})))}}]),t}();sn.propTypes={node:re.a.object.isRequired,page:re.a.object.isRequired,tastic:re.a.object.isRequired,data:re.a.object.isRequired,highlight:re.a.any},sn.defaultProps={};var cn=sn,un=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function ln(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var pn=function(e){function t(){var e,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=ln(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.columnMap={12:"e-cell--12",6:"e-cell--6",4:"e-cell--4",3:"e-cell--3"},ln(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),un(t,[{key:"render",value:function(){var e=this,t=this.props.cell,r=t.schema.get("size")||"12";return c.a.createElement("div",{className:"e-cell "+(t.schema.get("mobile")?"":"e-cell--hidden-hand ")+(t.schema.get("tablet")?"":"e-cell--hidden-lap ")+(t.schema.get("desktop")?"":"e-cell--hidden-desk ")+" "+this.columnMap[r],style:{margin:"0px",padding:"0px",float:"none",outline:t.cellId===this.props.highlight?"2px dashed #30a0bf":null}},t&&t.tastics&&t.tastics.length?h.a.map(t.tastics,function(r,n){return c.a.createElement(cn,{key:r.tasticId,highlight:e.props.highlight,node:e.props.node,page:e.props.page,data:e.props.data,region:e.props.region,cell:t,tastic:r})}):null)}}]),t}();pn.propTypes={node:re.a.object.isRequired,page:re.a.object.isRequired,region:re.a.object.isRequired,cell:re.a.object.isRequired,data:re.a.object.isRequired,highlight:re.a.any},pn.defaultProps={highlight:null};var fn=pn,hn=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var dn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),hn(t,[{key:"render",value:function(){var e=this,t=this.props.region;return t?c.a.createElement("div",{className:"e-region "+(t.schema.get("mobile")?"":"e-region--hidden-hand ")+(t.schema.get("tablet")?"":"e-region--hidden-lap ")+(t.schema.get("desktop")?"":"e-region--hidden-desk "),style:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:t.schema.get("justifyContent"),alignItems:t.schema.get("alignItems"),alignContent:t.schema.get("alignContent"),outline:t.regionId===this.props.highlight?"2px dashed #a1d8e7":null}},t&&t.elements&&t.elements.length?h.a.map(t.elements,function(r,n){return c.a.createElement(fn,{key:r.cellId,highlight:e.props.highlight,node:e.props.node,page:e.props.page,data:e.props.data,region:t,cell:r})}):null):null}}]),t}();dn.propTypes={node:re.a.object.isRequired,page:re.a.object.isRequired,region:re.a.object.isRequired,data:re.a.object.isRequired,highlight:re.a.any},dn.defaultProps={highlight:null};var mn=dn,yn=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var bn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),yn(t,[{key:"render",value:function(){return"kit"===this.props.page.layoutId?c.a.createElement("main",{className:"c-page-body"},c.a.createElement("div",{className:"c-page-wrapper o-wrapper"},c.a.createElement(mn,{identifier:"kit",region:this.props.page.regions.kit,highlight:this.props.highlight,data:this.props.data,node:this.props.node,page:this.props.page}))):c.a.createElement(s.Fragment,null,c.a.createElement("header",{className:"c-page-head"},this.props.page.regions.head?c.a.createElement(mn,{identifier:"head",region:this.props.page.regions.head,highlight:this.props.highlight,data:this.props.data,node:this.props.node,page:this.props.page}):null),c.a.createElement("main",{className:"c-page-body"},c.a.createElement("div",{className:"c-page-wrapper o-wrapper"},this.props.page.regions.main?c.a.createElement(mn,{identifier:"main",region:this.props.page.regions.main,highlight:this.props.highlight,data:this.props.data,node:this.props.node,page:this.props.page}):null)),c.a.createElement("footer",{className:"c-page-foot"},this.props.page.regions.footer?c.a.createElement(mn,{identifier:"footer",region:this.props.page.regions.footer,highlight:this.props.highlight,data:this.props.data,node:this.props.node,page:this.props.page}):null))}}]),t}();bn.propTypes={node:re.a.object.isRequired,page:re.a.object.isRequired,data:re.a.object.isRequired,highlight:re.a.any},bn.defaultProps={highlight:null};var gn=bn,vn=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var wn=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.layouts={},r.state={page:new J.Page(e.page||{},h.a.keys(e.page.regions),e.tastics||[])},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),vn(t,[{key:"componentWillUpdate",value:function(e){h.a.isEqual(this.props.page,e.page)||this.setState({page:new J.Page(e.page||{},h.a.keys(e.page.regions),e.tastics||[])})}},{key:"getLayout",value:function(){return this.state.page.layoutId&&this.layouts[this.state.page.layoutId]||gn}},{key:"render",value:function(){var e=this.getLayout();return c.a.createElement(e,{node:this.props.node,page:this.state.page,data:h.a.isArray(this.props.data)?{}:this.props.data,highlight:this.props.highlight})}}]),t}();wn.propTypes={node:re.a.object.isRequired,page:re.a.object.isRequired,data:re.a.object.isRequired,tastics:re.a.array.isRequired,highlight:re.a.any},wn.defaultProps={highlight:null};var _n=wn,jn=r(15),En=r(14),On=r.n(En),Pn=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var kn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),Pn(t,[{key:"render",value:function(){var e=!this.props.entity||this.props.entity.loading,t=!(!this.props.entity||!this.props.entity.error),r=this.props.large?128:32;return c.a.createElement(s.Fragment,null,c.a.createElement(jn.Transition,{appear:!0,in:e||t,timeout:115},function(e){return c.a.createElement("div",{className:"fade-"+e},c.a.createElement("div",{className:"c-overlay is-visible"},c.a.createElement("div",{className:"c-loading"},c.a.createElement("img",{src:On.a,width:r,height:r,alt:"Loading"}))))}))}}]),t}();kn.propTypes={large:re.a.bool,entity:re.a.object},kn.defaultProps={large:!1,entity:null};var xn=kn,Rn=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Tn=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.webSocket=null,r.state={highlight:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),Rn(t,[{key:"componentDidMount",value:function(){this.connectWebSocket(),window.addEventListener("message",this.highlight.bind(this),!1)}},{key:"componentDidUpdate",value:function(e){e.context.environment!==this.props.context.environment&&(this.webSocket.close(),this.webSocket=null,this.connectWebSocket())}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.highlight.bind(this),!1)}},{key:"highlight",value:function(e){e.isTrusted&&this.setState({highlight:e.data.item})}},{key:"connectWebSocket",value:function(){var e=this;if(this.props){var t=("dev"===this.props.context.environment?"ws://demo.frontastic.io.local:8080":"wss://demo.frontastic.io:8080")+"/ws?preview="+this.props.previewId;this.webSocket=new WebSocket(t),this.webSocket.onmessage=function(t){var r=JSON.parse(t.data);switch(r.Name){case"Refresh":ee.getLoader("node").reloadPreview({preview:e.props.previewId});break;case"Highlight":e.setState({highlight:r.Payload.item});break;case"EndHighlight":e.setState({highlight:null});break;case"Ping":break;default:console.info(r)}},this.webSocket.onclose=this.connectWebSocket}}},{key:"render",value:function(){return this.props.tastics.isComplete()?c.a.createElement("div",{className:"s-preview"},this.props.tastics.isComplete()?c.a.createElement(_n,{node:this.props.node.data||{},page:this.props.page.data||{},data:this.props.data.data||{},highlight:this.state.highlight,tastics:this.props.tastics.data}):null,c.a.createElement(xn,{large:!0,entity:this.props.data})):c.a.createElement(xn,{large:!0,entity:this.props.tastics})}}]),t}();Tn.propTypes={previewId:re.a.string.isRequired,node:re.a.object.isRequired,data:re.a.object.isRequired,page:re.a.object.isRequired,tastics:re.a.object.isRequired,context:re.a.object.isRequired},Tn.defaultProps={};var Cn=Object(p.connect)(function(e,t){return{previewId:e.app.route.get("preview"),node:e.node.nodes[e.node.previewId]||e.node.last.node,data:e.node.nodeData[e.node.currentCacheKey]||e.node.last.data,page:e.node.pages[e.node.previewId]||e.node.last.page,tastics:e.tastic.tastics||new g,context:e.app.context}})(Tn),Nn=r(13),Sn=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var qn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["Component"]),Sn(t,[{key:"render",value:function(){return this.props.tastics.isComplete()?c.a.createElement("div",{className:"s-node"},this.props.tastics.isComplete()?c.a.createElement(Nn.Scrollbars,{autoHide:!0,style:{height:"100vh",width:"100vw"}},c.a.createElement(_n,{node:this.props.node.data||{configuration:{}},page:this.props.page.data||{},data:this.props.data.data||{},tastics:this.props.tastics.data})):null,c.a.createElement(xn,{large:!0,entity:this.props.data})):c.a.createElement(xn,{large:!0,entity:this.props.tastics})}}]),t}();qn.propTypes={node:re.a.object.isRequired,data:re.a.object.isRequired,page:re.a.object.isRequired,tastics:re.a.object.isRequired},qn.defaultProps={};var Fn=Object(p.connect)(function(e,t){return{node:e.node.nodes[e.node.currentNodeId]||e.node.last.node,data:e.node.nodeData[e.node.currentCacheKey]||e.node.last.data,page:e.node.pages[e.node.currentNodeId]||e.node.last.page,tastics:e.tastic.tastics||new g}})(qn),An=a()();An.use(i.a.json({limit:"1MB"})),An.use(function(e,t){var r=new P(e.body.context),n=e.body.props;L.dispatch({type:"ApiBundle.Api.context.success",data:e.body.context}),ee.getRouter().setContext(r),ee.getRouter().setRoutes(r.routes);var a=function(e,t){return function(){return c.a.createElement(e,t)}};t.send(Object(u.renderToString)(c.a.createElement(p.Provider,{store:L},c.a.createElement(l.StaticRouter,{location:e.url,context:{}},c.a.createElement(l.Switch,null,c.a.createElement(l.Route,{exact:!0,path:ee.getRouter().reactRoute("Frontastic.Frontend.Preview.view"),component:a(Cn,n)}),h.a.toArray(h.a.mapValues(ee.getRouter().routes,function(e,t){return"node_"!==t.substr(0,5)?null:c.a.createElement(l.Route,{exact:!0,key:t,path:ee.getRouter().reactRoute(t),component:a(Fn,n)})})),c.a.createElement(l.Route,{exact:!0,key:"Frontastic.Frontend.Master.Product.view",path:ee.getRouter().reactRoute("Frontastic.Frontend.Master.Product.view"),component:a(Fn,n)}),c.a.createElement(l.Route,{exact:!0,key:"Frontastic.Frontend.Master.Category.view",path:ee.getRouter().reactRoute("Frontastic.Frontend.Master.Category.view"),component:a(Fn,n)}),c.a.createElement(l.Route,{component:function(){return console.error("No route found."),null}}))))))}),An.listen(8e3)},function(e,t){e.exports=require("rc-slider/assets/index.css")},function(e,t,r){e.exports=r(34)}]);
//# sourceMappingURL=server.js.map